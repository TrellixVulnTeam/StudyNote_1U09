###HTTP NOTE
####HTTP协议：超文本传输协议 ，完成客户端到服务器等一系列运作流程。
####TCP/IP是互联网相关的各类协议族的总称
####TPC/IP协议族各层作用如下：
+ 应用层
    * 决定了向用户提供应用服务时通信的活动
    * 例如：FTP(文件传输协议)、DNS(域名系统)、HTTP等
+ 传输层：
    * 对上层应用层提供处于网络连接中的两台计算机之间的数据传输
    * TCP(传输控制协议)、UDP(用户数据报协议) ：将大块数据分割成以报文段为单位的数据包进行管理
+ 网络层：
    * 用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径(所谓的传输路线)到达对方计算机，并把数据包传给对方。
    * 作用是在众多的选项内选择一条传输路线 IP(网际协议)
+ 链路层：
    * 用来处理链接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC(网络适配器，即网卡)，及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。
####利用TCP/IP协议族进行网络通信时，会通过分层顺序与对方进行通信发送端从应用层往下走，接受端则从应用层往上走。
####我们用 HTTP 举例来说明， 首先作为发送端的客户端在应用层
（HTTP 协议） 发出一个想看某个 Web 页面的 HTTP 请求。
接着， 为了传输方便， 在传输层（TCP 协议） 把从应用层处收到的数
据（HTTP 请求报文） 进行分割， 并在各个报文上打上标记序号及端
口号后转发给网络层。

####在网络层（IP 协议） ， 增加作为通信目的地的 MAC 地址后转发给链
路层。 这样一来， 发往网络的通信请求就准备齐全了。

####接收端的服务器在链路层接收到数据， 按序往上层发送， 一直到应用
层。 当传输到应用层， 才能算真正接收到由客户端发送过来的 HTTP
请求
####发送端在层与层之间传输数据时， 每经过一层时必定会被打上一个该
层所属的首部信息。 反之， 接收端在层与层传输数据时， 每经过一层
时会把对应的首部消去。
####这种把数据信息包装起来的做法称为封装  。
    IP 协议的作用是把各种数据包传送给对方。 而要保证确实传送到对方
    那里， 则需要满足各类条件。 其中两个重要的条件是 IP 地址和 MAC
    地址（Media Access Control Address） 。
    IP 地址指明了节点被分配到的地址， MAC 地址是指网卡所属的固定
    地址。 IP 地址可以和 MAC 地址进行配对。 IP 地址可变换， 但 MAC
    地址基本上不会更改。

####TCP三次握手、四次分手
+ 握手：
    * 发送端将标有SYN的数据包发给接收端。
    * 接受端收到数据包，并发送标有SYN/ACK的数据包给发送端
    * 发送端接收，并发送标有ACK的数据包给接收端。
+ 分手：
    * 服务器端发送标有FIN标志的数据包给客户端
    * 客户端接收数据包，并向服务器端发送ACK标志的数据包
    * 客户端向服务器端发送带有FIN标志的数据包给服务器端
    * 服务器端向客户端发送ACK标志的数据包

####负责域名解析的DNS 服务
DNS提供域名到IP地址之间的解析服务。通过域名查找IP地址，或逆向从IP地址反查域名

####URI和URL
#####URI(统一资源标识符) 某个协议方案表示的资源的定位标识符 ，协议可以是多种。
例如：
ftp://ftp.is.co.za/rfc/rfc1808.txt
http://www.ietf.org/rfc/rfc2396.txt
ldap://[2001:db8::7]/c=GB?objectClass?one
mailto:John.Doe@example.com
news:comp.infosystems.www.servers.unix
tel:+1-816-555-1212
telnet://192.0.2.16:80/
urn:oasis:names:specification:docbook:dtd:xml:4.1.2
URI由以下几部分组成
http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch 1
协议方案名、登陆信息、服务器地址、端口号、带层次的文件路径、查询字符串、片段标识符

#####URL(统一资源定位符)

####HTTP请求和相应
#####发送请求：
        GET / HTTP/1.1
        Host: hackr.jp

        name=ueno&age=37
######请求报文由请求方法、请求URI 、协议版本、可选的 请求首部字段 和内容实体构成


#####响应请求：
    HTTP/1.1 200 OK
    Date: Tue, 10 Jul 2012 06:50:15 GMT
    Content-Length:362
    Content-Type: text/html
    
    <html>
    ...
    </html>
######响应报文由协议版本、状态码 、用以解释状态码的原因短语 、可选的相应首部字段 、以及实体主体构成 。


####HTTP是不保存状态的协议
HTTP 是一种不保存状态， 即无状态（stateless） 协议。 HTTP 协议自
身不对请求和响应之间的通信状态进行保存。 也就是说在 HTTP 这个
级别， 协议对于发送过的请求或响应都不做持久化处理。
####HTTP方法
+ GET
+ POST
+ PUT:用于传输文件到服务器，请求报文包含主体，保存到指定URI的指定位置
+ HEAD：返回相应首部，没有相应实体，用于确认URI的有效性及资源的更新时间。
+ DELETE:删除文件，与PUT一样一般不使用。
+ OPTIONS:用于查询指定URI资源支持的方法。
+ TRACK:追踪路径
+ CONNECT: 用隧道协议链接代理，要求在与代理服务器通信时建立隧道。实现隧道协议进行TCP通信。

####HTTP持久链接：只要一方没有明确提出断开连接。则保持TCP链接状态  。
####HTTP管线化：同时并行发送多个请求， 不需要一个接一个的等待相应。
+ 没有Cookie信息状态下的请求：
    * 客户端发送请求
    * 服务器生成Cookie，在响应中添加Cookie后返回。
+ 第二次请求：
    * 客户端发送请求中添加Cookie
    * 服务器检查Cookie，然后返回响应。

####HTTP报文由报文首部、空行、报文主体构成 。
####多部分对象集合包含的对象如下：
+ multipart/form-data
    * 在web表单文件上传时使用。
+ multipart/byteranges
    * 状态码206响应报文包含了多个范围的内容时使用。
    * 使用 boundary字符串来划分多部分对象集合指明的各类实体。 
    * 在boundary字符串指定的各个实体的起始行之前插入“--”标记
#####获取部分内容的范围请求
对一份 10 000 字节大小的资源， 如果使用范围请求， 可以只请求
5001~10 000 字节内的资源。
执行范围请求时， 会用到首部字段 Range 来指定资源的 byte 范围。
byte 范围的指定形式如下。
如果服务器端无法响应范围请求， 则会返回状态码 200 OK 和完整的
实体内容。
#####内容协商
内容协商机制是指客户端和服务器端就响应的资源内容进行交涉， 然
后提供给客户端最为适合的资源。 内容协商会以响应资源的语言、 字
符集、 编码方式等作为判断的基准。
包括：服务器驱动协商、客户端驱动协商、透明协商(两方各自协商)

####状态码
+ 1xx
    * Informational(信息性状态码) 接收的请求正在处理
+ 2xx
    * Success(成功状态码) 请求正常处理完毕
+ 3xx
    * Redirection(重定向状态码) 需要进行附加操作以完成请求
+ 4xx
    * Client Error(客户端错误状态码) 服务器无法处理请求
+ 5xx
    * Server Error(服务器错误状态码) 服务器处理请求出错
####通信数据转发程序：代理、网关、隧道(稍后加上 P.71)

###HTTP首部
+ 通用首部字段：
    * Cache-Control : 控制缓存的行为
    * Connection : 逐跳首部、连接的管理
    * Date : 创建报文的日期时间
    * Pragma : 报文指令
    * Trailer ： 报文末端的首部一览
    * Transfer-Encoding ： 指定报文主体的传输编码方式
    * Upgrade ： 升级为其他协议
    * Via ：代理服务器的相关信息
    * Warning ： 错误通知

+ 请求首部字段：
    * Accept : 用户代理可处理的媒体类型
    * Accept-Charset : 优先的字符集
    * Accept-Encoding : 优先的内容编码
    * Accept-Language : 优先的语言(自然语言)
    * Authorization : Web认证信息
    * Expect : 期待服务器的特定行为
    * From : 用户的电子邮箱地址
    * Host : 请求资源所在服务器
    * If-Match : 比较实体标记(ETag)
    * If-Modified-Since : 比较资源的更新时间
    * If-None-Match : 比较实体标记(与If-Match相反)
    * If-Range : 资源未更新时发送实体Byte的范围请求
    * If-Unmodified-Since : 比较资源的更新时间(与If-Modified-Since相反)
    * Max-Forwards : 最大传输逐跳数
    * Proxy-Authorization : 代理服务器要求客户端的认证信息
    * Range : 实体的字节范围请求
    * Referer : 对请求中URI的原始获取方
    * TE : 传输编码的优先级
    * User-Agent : HTTP客户端程序的信息

+ 响应首部：
    * Accept-Ranges : 是否接收字节范围请求
    * Age : 推算资源创建经过时间
    * ETag : 资源的匹配信息
    * Location : 令客户端重定向至指定URL
    * Proxy-Authenticate : 代理服务器对客户端的认证信息
    * Retry-After : 对再次发起请求的时机要求
    * Server : HTTP服务器的安装信息
    * Vary : 代理服务器缓存的管理信息
    * WWW-Authenticate : 服务器对客户端的认证信息

+ 实体首部字段：
    * Allow : 资源可支持的HTTP方法
    * Content-Encoding : 实体主体适用的编码方式
    * Content-Language : 实体主体的自然语言
    * Content-Length : 实体主体的大小
    * Content-Location : 替代对应资源的URI
    * Content-MD5 : 实体主体的报文摘要
    * Content-Range : 尸体主体的位置范围
    * Content-Type : 实体主体的媒体类型
    * Expires : 实体主体过期的日期时间
    * Last-Modified : 资源的最后修改日期时间

